<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Recipe - Healthy Meal Planner</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gradient-to-b from-green-50 to-white text-gray-800 font-sans min-h-screen">
  <div class="max-w-3xl mx-auto p-6">
    <div class="rounded-xl overflow-hidden shadow-xl mb-6 relative">
      <img id="recipeImage" src="https://cdn.pixabay.com/photo/2021/01/16/12/12/food-5921525_1280.jpg" alt="Recipe Image" class="w-full h-64 object-cover">
      <span class="absolute top-3 right-3 bg-white px-3 py-1 rounded-full text-xs font-semibold shadow text-green-600">NEW</span>
      <button id="favButton" onclick="toggleFavorite()" class="absolute top-3 left-3 text-2xl text-gray-400 hover:text-red-500">‚ô°</button>
    </div>

    <div class="mb-6">
      <h1 class="text-4xl font-extrabold text-green-700 mb-2">Tortilla Egg Chicken Kousenband</h1>
      <div class="flex flex-wrap gap-4 text-sm text-gray-500 items-center">
        <div class="flex items-center gap-2 bg-white px-3 py-1 rounded-full shadow-sm">üïí 10 min</div>
        <div class="flex items-center gap-2 bg-white px-3 py-1 rounded-full shadow-sm">üî• 278 kcal</div>
        <div class="flex items-center gap-2 bg-white px-3 py-1 rounded-full shadow-sm">
          üë§
          <input id="servingInput" type="number" min="1" value="1" onchange="updateServings()" class="w-12 text-center bg-transparent focus:outline-none" /> serve(s)
        </div>
      </div>
    </div>

    <div class="mb-6 border-b border-gray-200 flex gap-6">
      <button id="ingredientsTab" class="py-2 font-medium text-green-600 border-b-2 border-green-600 transition-all duration-300" onclick="showTab('ingredients')">Ingredients</button>
      <button id="instructionsTab" class="py-2 font-medium text-gray-500 hover:text-green-600 transition-all duration-300" onclick="showTab('instructions')">Instructions</button>
      <button id="nutritionTab" class="py-2 font-medium text-gray-500 hover:text-green-600 transition-all duration-300" onclick="showTab('nutrition')">Nutrition</button>
    </div>

    <div id="tabContent" class="transition-opacity duration-500">
      <ul id="ingredients" class="space-y-3 text-sm">
        <li><label class="flex items-center gap-2"><input type="checkbox" class="ingredient-checkbox" data-base="1" data-unit="pcs"> <span class="ingredient-label">1 pcs √ó Tortilla wraps</span></label></li>
        <li><label class="flex items-center gap-2"><input type="checkbox" class="ingredient-checkbox" data-base="2" data-unit="pcs"> <span class="ingredient-label">2 pcs √ó Eggs</span></label></li>
        <li><label class="flex items-center gap-2"><input type="checkbox" class="ingredient-checkbox" data-base="150" data-unit="g"> <span class="ingredient-label">150 g √ó Chicken breast</span></label></li>
        <li><label class="flex items-center gap-2"><input type="checkbox" class="ingredient-checkbox" data-base="50" data-unit="g"> <span class="ingredient-label">50 g √ó Kousenband</span></label></li>
        <li><label class="flex items-center gap-2"><input type="checkbox" class="ingredient-checkbox" data-base="1" data-unit="clove"> <span class="ingredient-label">1 clove √ó Garlic</span></label></li>
        <li><label class="flex items-center gap-2"><input type="checkbox" class="ingredient-checkbox" data-base="0.5" data-unit="pcs"> <span class="ingredient-label">0.5 pcs √ó Onion</span></label></li>
        <li><label class="flex items-center gap-2"><input type="checkbox" class="ingredient-checkbox" checked data-base="1" data-unit="tsp"> <span class="ingredient-label">1 tsp √ó Salt</span></label></li>
        <li><label class="flex items-center gap-2"><input type="checkbox" class="ingredient-checkbox" checked data-base="1" data-unit="tsp"> <span class="ingredient-label">1 tsp √ó Pepper</span></label></li>
        <li><label class="flex items-center gap-2"><input type="checkbox" class="ingredient-checkbox" checked data-base="1" data-unit="tsp"> <span class="ingredient-label">1 tsp √ó Paprika</span></label></li>
        <li><label class="flex items-center gap-2"><input type="checkbox" class="ingredient-checkbox" checked data-base="1" data-unit="tbsp"> <span class="ingredient-label">1 tbsp √ó Oil</span></label></li>
      </ul>

      <ol id="instructions" class="space-y-4 text-sm hidden mt-4 list-decimal list-inside">
        <li><label class="flex items-start gap-2"><input type="checkbox" class="step-check mt-1"> <span>Prep the chicken ‚Äì Cut chicken into thin strips. Season with salt, pepper, and a bit of paprika.</span></label></li>
        <li><label class="flex items-start gap-2"><input type="checkbox" class="step-check mt-1"> <span>Cook the chicken ‚Äì Heat oil in a pan. Cook until golden brown. Set aside.</span></label></li>
        <li><label class="flex items-start gap-2"><input type="checkbox" class="step-check mt-1"> <span>Cook the kousenband ‚Äì In the same pan, add chopped kousenband and garlic/onion. Saut√© for 3‚Äì4 minutes until tender but crunchy.</span></label></li>
        <li><label class="flex items-start gap-2"><input type="checkbox" class="step-check mt-1"> <span>Scramble the eggs ‚Äì Beat eggs with a pinch of salt. Scramble until fluffy.</span></label></li>
        <li><label class="flex items-start gap-2"><input type="checkbox" class="step-check mt-1"> <span>Assemble the wrap ‚Äì Warm tortillas slightly. Fill with chicken, eggs, and kousenband.</span></label></li>
        <li><label class="flex items-start gap-2"><input type="checkbox" class="step-check mt-1"> <span>Wrap and enjoy! ‚Äì Add sauce if you like (e.g., garlic, spicy mayo).</span></label></li>
      </ol>

      <div id="nutrition" class="hidden mt-4">
        <canvas id="nutritionChart" width="300" height="300" class="mx-auto my-6"></canvas>
      </div>
    </div>

    <div class="mt-6 flex flex-col gap-3">
      <div id="shoppingListContainer" class="bg-white border rounded-md p-4 shadow hidden">
        <h3 class="font-semibold text-gray-700 mb-2">üõí Shopping List</h3>
        <ul id="shoppingList" class="list-disc list-inside text-sm text-gray-600"></ul>
      </div>
      <button onclick="generateShoppingList()" class="bg-green-100 hover:bg-green-200 text-green-700 px-4 py-2 rounded-full text-sm">üõí Show Shopping List</button>
      <button onclick="downloadShoppingList()" class="bg-blue-100 hover:bg-blue-200 text-blue-700 px-4 py-2 rounded-full text-sm">‚¨áÔ∏è Download Shopping List</button>
    </div>
  </div>

  <script>
    let servings = 1;

    function updateServings() {
      const input = document.getElementById("servingInput");
      servings = Math.max(1, parseInt(input.value));
      const boxes = document.querySelectorAll('.ingredient-checkbox');
      boxes.forEach(box => {
        const base = parseFloat(box.getAttribute("data-base"));
        const unit = box.getAttribute("data-unit") || "";
        if (!isNaN(base)) {
          const label = box.closest("label").querySelector(".ingredient-label");
          const name = label.textContent.split("√ó").pop().trim();
          label.textContent = `${Math.round(base * servings * 10) / 10} ${unit} √ó ${name}`;
        }
      });
    }

    function toggleFavorite() {
      const fav = document.getElementById("favButton");
      fav.textContent = fav.textContent === "‚ô°" ? "‚ù§Ô∏è" : "‚ô°";
    }

    function generateShoppingList() {
      const items = Array.from(document.querySelectorAll('.ingredient-checkbox'));
      const missing = items.filter(i => !i.checked).map(i => i.closest('label').querySelector('.ingredient-label').textContent.trim());
      const list = document.getElementById('shoppingList');
      const container = document.getElementById('shoppingListContainer');
      list.innerHTML = '';
      if (missing.length) {
        missing.forEach(item => {
          const li = document.createElement('li');
          li.textContent = item;
          list.appendChild(li);
        });
        container.classList.remove('hidden');
      } else {
        container.classList.remove('hidden');
        list.innerHTML = '<li>‚úÖ You have all ingredients!</li>';
      }
    }

    function downloadShoppingList() {
      const items = Array.from(document.querySelectorAll('.ingredient-checkbox'));
      const missing = items.filter(i => !i.checked).map(i => i.closest('label').querySelector('.ingredient-label').textContent.trim());
      const blob = new Blob([missing.join('\n')], { type: 'text/plain' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'shopping_list.txt';
      link.click();
    }

    function showTab(tab) {
      const ingredients = document.getElementById('ingredients');
      const instructions = document.getElementById('instructions');
      const nutrition = document.getElementById('nutrition');

      ingredients.classList.add('hidden');
      instructions.classList.add('hidden');
      nutrition.classList.add('hidden');

      document.getElementById('ingredientsTab').classList.remove('text-green-600', 'border-green-600');
      document.getElementById('instructionsTab').classList.remove('text-green-600', 'border-green-600');
      document.getElementById('nutritionTab').classList.remove('text-green-600', 'border-green-600');

      if (tab === 'ingredients') {
        ingredients.classList.remove('hidden');
        document.getElementById('ingredientsTab').classList.add('text-green-600', 'border-b-2', 'border-green-600');
      } else if (tab === 'instructions') {
        instructions.classList.remove('hidden');
        document.getElementById('instructionsTab').classList.add('text-green-600', 'border-b-2', 'border-green-600');
      } else if (tab === 'nutrition') {
        nutrition.classList.remove('hidden');
        document.getElementById('nutritionTab').classList.add('text-green-600', 'border-b-2', 'border-green-600');
      }
    }

    const ctx = document.getElementById('nutritionChart').getContext('2d');
    new Chart(ctx, {
      type: 'pie',
      data: {
        labels: ['Protein', 'Carbs', 'Fat'],
        datasets: [{
          label: 'Nutrition Breakdown',
          data: [30, 45, 25],
          backgroundColor: ['#34D399', '#60A5FA', '#F87171']
        }]
      },
      options: {
        plugins: {
          legend: { position: 'bottom' }
        }
      }
    });
  </script>
</body>
</html>
